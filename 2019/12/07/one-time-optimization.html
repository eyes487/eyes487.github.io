<!DOCTYPE HTML>
<html lang="zh-CN">

<head><meta name="generator" content="Hexo 3.9.0">
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="eyes487çš„åšå®¢">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <meta name="theme-version" content="1.2.3">
    <meta name="root" content="/">
    <meta name="google-site-verification" content="kh2qynWK0TEziuoSJmSB1lNTaVoVXykqpgCSyD1FtWA">
    <link rel="dns-prefetch" href="http://blog.eyes487.top">
    <!--SEO-->

<meta name="keywords" content="js æ€§èƒ½ä¼˜åŒ–">


<meta name="description" content="ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ æ›´æ–°â€”-2020.06.07 ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡
æœ€è¿‘å­¦ä¹ äº†http2ï¼Œæ‰€ä»¥æƒ³å°†è‡ªå·±çš„ç½‘ç«™...">


<meta name="robots" content="all">
<meta name="google" content="all">
<meta name="googlebot" content="all">
<meta name="verify" content="all">
    <!--Title-->

<title>
    
    è®°ä¸€æ¬¡æ€§èƒ½ä¼˜åŒ–ï¼Œä»å…­ä¸ƒç§’ä¼˜åŒ–åˆ°1.35s |
    
    eyes487çš„åšå®¢
</title>

<link rel="alternate" href="/atom.xml" title="eyes487çš„åšå®¢" type="application/atom+xml">


<link rel="icon" href="/./favicon.ico">

    

<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.7.0">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">
    
<div class="hide">
    <script type="text/javascript">
    var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
    document.write(unescape("%3Cspan class='cnzz_stat_icon_1278192097 hide' %3E%3Cscript%20src%3D%22https%3A%2F%2Fs95.cnzz.com%2Fz_stat.php%3Fweb_id%3D1272564536%22%3E%3C%2Fscript%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/z_stat.php%3Fid%3D1278192097%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? "https://" : "http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1278192097'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s9.cnzz.com/z_stat.php%3Fid%3D1278192097%26online%3D2' type='text/javascript'%3E%3C/script%3E"));</script>

</div>




    

<script>
(function() {
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    } else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

</head></html>
<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">ä½ ä½¿ç”¨çš„æµè§ˆå™¨ç‰ˆæœ¬è¿‡ä½ï¼Œä¸ºäº†ä½ æ›´å¥½çš„é˜…è¯»ä½“éªŒï¼Œè¯·æ›´æ–°æµè§ˆå™¨çš„ç‰ˆæœ¬æˆ–è€…ä½¿ç”¨å…¶ä»–ç°ä»£æµè§ˆå™¨ï¼Œæ¯”å¦‚Chromeã€Firefoxã€Safariç­‰ã€‚</div>
<![endif]-->
<body>
    <header class="main-header"  style="background-image:url(
    /./img/banner.jpg)"
     >
    <div class="main-header-box">
        <a class="header-avatar" href="/" title='xm'>
            <img src="/img/avatar.jpg" alt="logoå¤´åƒ" class="img-responsive center-block">
        </a>
        <div class="branding">
            <!--<h2 class="text-hide">Snippetä¸»é¢˜,ä»æœªå¦‚æ­¤ç®€å•æœ‰è¶£</h2>-->
            
            <img src="/img/branding.png" alt="Snippet åšå®¢ä¸»é¢˜" class="img-responsive center-block">
            
        </div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                        <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="navbar-brand" href="http://blog.eyes487.top">
                        eyes487çš„åšå®¢</a>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                        <li role="presentation" class="text-center">
                            <a href="/"><i class="fa fa-home"></i>
                                é¦–é¡µ</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/categories/å‰ç«¯/"><i class="fa fa-html5"></i>
                                å‰ç«¯</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/archives/"><i class="fa fa-clock-o"></i>
                                æ—¶é—´è½´</a>
                        </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="è®°ä¸€æ¬¡æ€§èƒ½ä¼˜åŒ–ï¼Œä»å…­ä¸ƒç§’ä¼˜åŒ–åˆ°1.35s">
            
            è®°ä¸€æ¬¡æ€§èƒ½ä¼˜åŒ–ï¼Œä»å…­ä¸ƒç§’ä¼˜åŒ–åˆ°1.35s
            
        </h1>
        <div class="post-meta">
    
    <span class="categories-meta fa-wrap">
        <i class="fa fa-folder-open-o"></i>
        <a class="category-link" href="/categories/å‰ç«¯/">å‰ç«¯</a>
    </span>
    
    
    <span class="fa-wrap">
        <i class="fa fa-tags"></i>
        <span class="tags-meta">
            
            <a class="tag-link" href="/tags/js-æ€§èƒ½ä¼˜åŒ–/">js æ€§èƒ½ä¼˜åŒ–</a>
            
        </span>
    </span>
    
    
    
    <span class="fa-wrap">
        <i class="fa fa-clock-o"></i>
        <span class="date-meta">
            2019/12/07</span>
    </span>
    
    <!-- <span class="fa-wrap">
        <i class="fa fa-eye"></i>
        <span id="busuanzi_value_page_pv"></span>
    </span> -->
    
    
</div>
        
        
        <p class="fa fa-exclamation-triangle warning">
            æœ¬æ–‡äº<strong>
                490</strong>
            å¤©ä¹‹å‰å‘è¡¨ï¼Œæ–‡ä¸­å†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ã€‚
        </p>
        
    </div>
    
    <div class="post-body post-content">
        <p>ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ æ›´æ–°â€”-2020.06.07 ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡</p>
<p>æœ€è¿‘å­¦ä¹ äº†http2ï¼Œæ‰€ä»¥æƒ³å°†è‡ªå·±çš„ç½‘ç«™ä¹Ÿå‡çº§http2è¯•ä¸€ä¸‹ï¼Œå‡çº§ä¹‹åé¡µé¢åŠ è½½é€Ÿåº¦ç¡®å®æé«˜äº†ï¼Œé€Ÿåº¦è¾¾åˆ°äº†<code>711ms</code>,<a href="https://www.eyes487.top" target="_blank" rel="noopener">æŸ¥çœ‹åœ°å€</a><br><img src="https://www.eyes487.top/fs/uploads/1591513974984-HTTP.png" alt="http2" title="http2"></p>
<p>å‡†å¤‡å·¥ä½œ</p>
<ul>
<li>åŸŸåï¼Œä¹‹å‰ææ´»åŠ¨ä¹°çš„ï¼ŒæŒºä¾¿å®œ</li>
<li>æœåŠ¡å™¨å¤‡æ¡ˆï¼Œæˆ‘ä½¿ç”¨çš„é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼Œä¸Šä¼ è‡ªå·±ä¿¡æ¯ï¼Œå‡ å¤©å°±é€šè¿‡äº†</li>
<li>sslè¯ä¹¦ï¼Œæˆ‘åœ¨é˜¿é‡Œäº‘ç”³è¯·çš„å…è´¹çš„</li>
</ul>
<h2 id="å‡çº§HTTPS"><a href="#å‡çº§HTTPS" class="headerlink" title="å‡çº§HTTPS"></a>å‡çº§HTTPS</h2><p>http2é»˜è®¤åªæ”¯æŒhttpsï¼Œæ‰€ä»¥å¿…é¡»å…ˆå‡çº§httpsã€‚æˆ‘ä½¿ç”¨çš„nginxæœåŠ¡å™¨ï¼Œä¹‹å‰å°±å·²ç»å®‰è£…è¿‡äº†ã€‚è¦å‡çº§httpsï¼Œé¦–å…ˆ<code>nginx</code>å®‰è£…éœ€è¦çš„æ¨¡å—<code>--with-http_ssl_module</code>ï¼Œ<strong>å¦‚æœæ˜¯é€šè¿‡<code>yum install nginx</code>å®‰è£…çš„nginxï¼Œå®ƒæ˜¯å·²ç»åŒ…å«äº†æ‰€æœ‰æ¨¡å—çš„ï¼Œå°±ä¸éœ€è¦å®‰è£…äº†</strong>ï¼Œåªæœ‰é€šè¿‡<strong>å‹ç¼©åŒ…</strong>å®‰è£…çš„æ‰éœ€è¦å•ç‹¬å®‰è£…æ¨¡å—ï¼Œç„¶åæŠŠ<strong>sslè¯ä¹¦</strong>æ”¾åˆ°æœåŠ¡å™¨ä¸Šï¼Œé…ç½®<code>nginx.conf</code>,ç„¶åé‡å¯å°±å¯ä»¥çœ‹åˆ°å·²ç»æ”¯æŒhttpsè¯·æ±‚äº†ã€‚<br>ç½‘ä¸Šæœ‰å¾ˆå¤šæ•™ç¨‹ï¼Œè¿™é‡Œå°±ä¸ç»†è¯´æˆ‘çš„æ­¥éª¤äº†ã€‚</p>
<h2 id="å‡çº§HTTP2"><a href="#å‡çº§HTTP2" class="headerlink" title="å‡çº§HTTP2"></a>å‡çº§HTTP2</h2><p>æ”¯æŒhttpsä¹‹åï¼Œæ­¥éª¤å’Œä¸Šé¢å·®ä¸å¤šï¼Œ<code>nginx</code>å…ˆå®‰è£…æ¨¡å—<code>--with-http_v2_module</code>,ä¹‹åå†é…ç½®<code>nginx.conf</code>ã€‚ç½‘ä¸Šæ•™ç¨‹å¾ˆå¤šï¼Œæˆ‘å°±ä¸è¯´å…·ä½“æ­¥éª¤äº†ï¼Œè¯´ä¸€ä¸‹æˆ‘é‡åˆ°çš„é—®é¢˜ã€‚</p>
<p>æˆ‘é…ç½®äº†HTTP2ä¹‹åå¹¶æ²¡æœ‰èµ·ä½œç”¨ï¼Œç„¶åä¹Ÿæ˜¯åœ¨ç½‘ä¸Šæœäº†ä¸€å¤§å †é—®é¢˜ï¼Œéƒ½æ˜¯è¯´äº†ä¸¤ä¸ªé—®é¢˜ï¼Œhttp2å¿…é¡»æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼š</p>
<ul>
<li>nginxç‰ˆæœ¬è¦é«˜äº1.9.5</li>
<li>opensslç‰ˆæœ¬è¦é«˜äº1.0.2e</li>
</ul>
<p>ä½†æ˜¯æˆ‘å‘ç°ï¼Œè¿™ä¸¤ä¸ªè¦æ±‚æˆ‘éƒ½æ˜¯æ»¡è¶³çš„ï¼Œä½†æ˜¯å°±æ˜¯ä¸èµ·æ•ˆæœï¼ŒæŠ˜è…¾äº†å¥½ä¹…ã€‚</p>
<p>æœ€åï¼Œé€šè¿‡<strong>é‡æ–°å¯åŠ¨nginx</strong>è§£å†³äº†ï¼Œè¿™é‡Œè¯´çš„é‡å¯å¹¶ä¸æ˜¯æŒ‡<code>./nginx -s reload</code>,è€Œæ˜¯ä½ å¿…é¡»å…ˆå…³æ‰<code>./nginx -s quit</code>,ç„¶ååœ¨å¼€å¯<code>./nginx</code>ã€‚</p>
<p><strong>éš¾æ€ªå¾ˆå¤šè§£å†³ä¸äº†çš„é—®é¢˜ï¼Œéƒ½é€šè¿‡é‡å¯è§£å†³ï¼ŒO(âˆ©_âˆ©)Oå“ˆå“ˆ~</strong></p>
<p>ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘† æ›´æ–°â€”-2020.06.07 ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†</p>
<p>è¿™æ˜¯åœ¨è¿˜æ²¡æ¯•ä¸šåšçš„ä¸€ä¸ªé¡¹ç›®ï¼Œä¸€ç›´æ”¾åœ¨ä¹‹å‰çš„æœåŠ¡å™¨ä¸Šï¼Œä¸ä¹…ä¹‹å‰æœåŠ¡å™¨åˆ°æœŸäº†ã€‚è¶ç€åŒåä¸€çš„æœºä¼šï¼Œä¼˜æƒ å¾ˆå¤§å°±åˆä¹°äº†ä¸€ä¸ªï¼ŒæŠŠé¡¹ç›®è¿ç§»åˆ°æ–°çš„æœåŠ¡å™¨ä¸Šã€‚é¦–é¡µåŠ è½½çš„é€Ÿåº¦æœ‰å…­ä¸ƒç§’å·¦å³ï¼Œä»¥å‰ä¹Ÿä¼˜åŒ–è¿‡ä¸€äº›ï¼Œä½†ä»¥å‰æŠ€æœ¯æœ‰é™ï¼Œå°±æ²¡æ€ä¹ˆç®¡å®ƒäº†ã€‚è¿™æ¬¡è¶ç€æ¢æ–°æœåŠ¡å™¨ï¼Œå°±æƒ³ç€æ¥ä¼˜åŒ–ä¸€ä¸‹ç½‘ç«™ã€‚<code>ç½‘é€Ÿ</code>ã€<code>ç”µè„‘å“åº”é€Ÿåº¦</code>ç­‰ éƒ½ä¼šå¯¹é¡µé¢åŠ è½½é€Ÿåº¦æœ‰å½±å“ï¼ŒåŸºæœ¬å¯ä»¥ç¨³å®šåœ¨ 1ç§’å¤š(æœªä½¿ç”¨CDN)ï¼Œå…ˆä¸Šç½‘ç«™åœ°å€ <a href="https://www.eyes487.top" target="_blank" rel="noopener">èŠ±é—´é“</a>,ä¸‹é¢ä»æˆ‘æ‰€ç”¨åˆ°çš„ä¼˜åŒ–æ–¹æ³•ä»‹ç»ã€‚</p>
<h2 id="1-å‡å°‘httpè¯·æ±‚æ•°"><a href="#1-å‡å°‘httpè¯·æ±‚æ•°" class="headerlink" title="1. å‡å°‘httpè¯·æ±‚æ•°"></a>1. å‡å°‘httpè¯·æ±‚æ•°</h2><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œå‡å°‘ <code>http</code> è¯·æ±‚æ•°æ˜¯ç¼©çŸ­é¡µé¢åŠ è½½æ—¶é—´æœ€æœ‰æ•ˆçš„æ–¹æ³•</p>
<ul>
<li>èµ„æºå‹ç¼©å’Œåˆå¹¶ï¼Œå°½å¯èƒ½çš„å°†å¤–éƒ¨çš„è„šæœ¬ã€æ ·å¼è¿›è¡Œåˆå¹¶ï¼Œå¤šä¸ªåˆä¸ºä¸€ä¸ªã€‚</li>
<li>ä½¿ç”¨ <code>CSS Sprites</code>ï¼Œé€šè¿‡èƒŒæ™¯å®šä½è·å–å…·ä½“å›¾åƒ</li>
<li>åˆç†çš„è®¾ç½®httpç¼“å­˜</li>
</ul>
<h3 id="1-1-åˆå¹¶å‹ç¼©"><a href="#1-1-åˆå¹¶å‹ç¼©" class="headerlink" title="1.1 åˆå¹¶å‹ç¼©"></a>1.1 åˆå¹¶å‹ç¼©</h3><p>åˆå¹¶å‹ç¼©çš„æ„å»ºå·¥å…·æœ‰ï¼Œ<code>gulp</code>ï¼Œ<code>webpack</code>ï¼Œ<code>grunt</code>ç­‰ï¼Œæˆ‘å½“æ—¶ä½¿ç”¨çš„æ˜¯gulpï¼Œgulpä¸èƒ½å¤„ç†ES6ä»£ç ï¼Œæ‰€ä»¥è¿˜æ˜¯å¾—ç”¨webpackï¼Œæ˜¯å¦è¦åˆå¹¶ä»£ç è¿˜æ˜¯è¦å…·ä½“çœ‹è‡ªå·±çš„éœ€æ±‚ã€‚è¿™ä¸ªå°±è‡ªå·±å»æŸ¥çœ‹webpackäº†ã€‚</p>
<p>ä¸‹é¢æ˜¯ä½¿ç”¨gulpå¤„ç†lessè½¬åŒ–ä¸ºcssï¼Œå¹¶ä¸”ä¼šå‹ç¼©ä»£ç </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">gulp.task(<span class="string">'less'</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    gulp.src(<span class="string">'public/less/*.less'</span>)</span><br><span class="line">    .pipe(gulp_less())</span><br><span class="line">    .pipe(gulp_minify_css())</span><br><span class="line">    .pipe(gulp.dest(<span class="string">'public/stylesheets'</span>))</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="1-2-CSS-Sprites"><a href="#1-2-CSS-Sprites" class="headerlink" title="1.2 CSS Sprites"></a>1.2 CSS Sprites</h3><p>æ¨èè‡ªåŠ¨ç”Ÿæˆé›ªç¢§å›¾çš„å·¥å…·: <a href="https://www.toptal.com/developers/css/sprite-generator" target="_blank" rel="noopener">https://www.toptal.com/developers/css/sprite-generator</a><br>webpack ä¸­æœ‰ä¸€æ¬¾ç”Ÿæˆé›ªç¢§å›¾çš„æ’ä»¶ï¼Œ<a href="https://www.npmjs.com/package/webpack-spritesmith" target="_blank" rel="noopener">webpack-spritesmith</a>,ä¼šè‡ªåŠ¨å¸®ä½ ç”Ÿæˆè°ƒç”¨é›ªç¢§å›¾çš„cssæ ·å¼</p>
<h3 id="1-3-httpç¼“å­˜"><a href="#1-3-httpç¼“å­˜" class="headerlink" title="1.3 httpç¼“å­˜"></a>1.3 httpç¼“å­˜</h3><p>httpç¼“å­˜åˆ†ä¸º <strong>å¼ºåˆ¶ç¼“å­˜</strong> å’Œ <strong>åå•†ç¼“å­˜</strong></p>
<p>å¼ºåˆ¶ç¼“å­˜åœ¨å“åº”å¤´ä¸­ä¼šæœ‰<code>ï¼ˆExpires/Cache-Controlï¼‰</code>,Expiresæ˜¯1.0çš„ä¸œè¥¿ï¼Œåœ¨http 1.1éƒ½æ˜¯ç”¨Cache-Controlä»£æ›¿äº†</p>
<p>Cache-Control<br>private å®¢æˆ·ç«¯å¯ä»¥ç¼“å­˜<br>public å®¢æˆ·ç«¯å’Œä»£ç†æœåŠ¡å™¨éƒ½å¯ä»¥ç¼“å­˜<br>max-age=60 ç¼“å­˜å†…å®¹å°†åœ¨60ç§’åå¤±æ•ˆ<br>no-cache éœ€è¦ä½¿ç”¨å¯¹æ¯”ç¼“å­˜éªŒè¯æ•°æ®,å¼ºåˆ¶å‘æºæœåŠ¡å™¨å†æ¬¡éªŒè¯. ç¦ç”¨å¼ºåˆ¶ç¼“å­˜<br>no-store æ‰€æœ‰å†…å®¹éƒ½ä¸ä¼šç¼“å­˜ï¼Œå¼ºåˆ¶ç¼“å­˜å’Œå¯¹æ¯”ç¼“å­˜éƒ½ä¸ä¼šè§¦å‘ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line"><span class="keyword">let</span> url = <span class="built_in">require</span>(<span class="string">'url'</span>);</span><br><span class="line"><span class="keyword">let</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">let</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">let</span> mime = <span class="built_in">require</span>(<span class="string">'mime'</span>);</span><br><span class="line"></span><br><span class="line">http.createServer(<span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">let</span> &#123; pathname &#125; = url.parse(req.url, <span class="literal">true</span>);</span><br><span class="line">   <span class="keyword">let</span> filepath = path.join(__dirname, pathname);</span><br><span class="line">   <span class="built_in">console</span>.log(filepath);</span><br><span class="line">   fs.stat(filepath, (err, stat) =&gt; &#123;</span><br><span class="line">       <span class="keyword">if</span> (err) &#123;</span><br><span class="line">           <span class="keyword">return</span> sendError(req, res);</span><br><span class="line">       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">           send(req, res, filepath);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;).listen(<span class="number">8080</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sendError</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">   res.end(<span class="string">'Not Found'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">send</span>(<span class="params">req, res, filepath</span>) </span>&#123;</span><br><span class="line">   res.setHeader(<span class="string">'Content-Type'</span>, mime.getType(filepath));</span><br><span class="line">   <span class="comment">//expiresæŒ‡å®šäº†æ­¤ç¼“å­˜çš„è¿‡æœŸæ—¶é—´ï¼Œæ­¤å“åº”å¤´æ˜¯1.0å®šä¹‰çš„ï¼Œåœ¨1.1é‡Œé¢å·²ç»ä¸å†ä½¿ç”¨äº†</span></span><br><span class="line">   res.setHeader(<span class="string">'Expires'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">Date</span>.now() + <span class="number">30</span> * <span class="number">1000</span>).toUTCString());</span><br><span class="line">   res.setHeader(<span class="string">'Cache-Control'</span>, <span class="string">'max-age=30'</span>);  <span class="comment">//è®¾ç½®ç¼“å­˜æ—¶é—´ä¸º30s</span></span><br><span class="line">   fs.createReadStream(filepath).pipe(res);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åå•†ç¼“å­˜ä½¿ç”¨ <code>Etag/If-None-Match</code> , <code>Last-Modified/If-Modify-Since</code></p>
<p>æµè§ˆå™¨ç¬¬ä¸€æ¬¡è¯·æ±‚æ•°æ®æ—¶ï¼ŒæœåŠ¡å™¨ä¼šå°†ç¼“å­˜æ ‡è¯†ä¸æ•°æ®ä¸€èµ·è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å°†äºŒè€…å¤‡ä»½è‡³ç¼“å­˜æ•°æ®åº“ä¸­ã€‚å†æ¬¡è¯·æ±‚æ•°æ®æ—¶ï¼Œå®¢æˆ·ç«¯å°†å¤‡ä»½çš„ç¼“å­˜æ ‡è¯†å‘é€ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨æ ¹æ®ç¼“å­˜æ ‡è¯†è¿›è¡Œåˆ¤æ–­ï¼Œåˆ¤æ–­æˆåŠŸåï¼Œè¿”å›304çŠ¶æ€ç ï¼Œé€šçŸ¥å®¢æˆ·ç«¯æ¯”è¾ƒæˆåŠŸï¼Œå¯ä»¥ä½¿ç”¨ç¼“å­˜æ•°æ®ã€‚</p>
<p>ä½¿ç”¨ <code>Last-Modified/If-Modify-Since</code>æ–¹æ³•</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">http.createServer(<span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> &#123;pathname&#125; = url.parse(req.url);</span><br><span class="line">    <span class="keyword">let</span> filepath = path.join(__dirname,pathname);</span><br><span class="line">    <span class="built_in">console</span>.log(filepath);</span><br><span class="line">    fs.stat(filepath,<span class="function"><span class="keyword">function</span> (<span class="params">err, stat</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">if</span> (err) &#123;</span><br><span class="line">              <span class="keyword">return</span> sendError(req,res)</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              <span class="comment">// å†æ¬¡è¯·æ±‚çš„æ—¶å€™ä¼šé—®æœåŠ¡å™¨è‡ªä»ä¸Šæ¬¡ä¿®æ”¹ä¹‹åæœ‰æ²¡æœ‰æ”¹è¿‡</span></span><br><span class="line">              <span class="keyword">let</span> ifModifiedSince = req.headers[<span class="string">'if-modified-since'</span>];</span><br><span class="line">              <span class="keyword">let</span> LastModified = stat.ctime.toGMTString();</span><br><span class="line">              <span class="keyword">if</span> (ifModifiedSince == LastModified) &#123;</span><br><span class="line">                  res.writeHead(<span class="string">'304'</span>);</span><br><span class="line">                  res.end(<span class="string">''</span>)</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                  <span class="keyword">return</span> send(req,res,filepath,stat)</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">&#125;).listen(<span class="number">8080</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">send</span>(<span class="params">req,res,filepath,stat</span>) </span>&#123;</span><br><span class="line">    res.setHeader(<span class="string">'Content-Type'</span>, mime.getType(filepath));</span><br><span class="line">    <span class="comment">// å‘ç»™å®¢æˆ·ç«¯ä¹‹åï¼Œå®¢æˆ·ç«¯ä¼šæŠŠæ­¤æ—¶é—´ä¿å­˜ä¸‹æ¥ï¼Œä¸‹æ¬¡å†è·å–æ­¤èµ„æºçš„æ—¶å€™ä¼šæŠŠè¿™ä¸ªæ—¶é—´å†å‘ç»™æœåŠ¡å™¨</span></span><br><span class="line">    res.setHeader(<span class="string">'Last-Modified'</span>, stat.ctime.toGMTString());</span><br><span class="line">    fs.createReadStream(filepath).pipe(res)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sendError</span>(<span class="params">req,res</span>) </span>&#123;</span><br><span class="line">    res.end(<span class="string">'Not Found'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ <code>Etag/If-None-Match</code>æ–¹æ³•, Etag çš„ä¼˜å…ˆçº§é«˜äº Last-Modified</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="2-å›¾ç‰‡ä¼˜åŒ–"><a href="#2-å›¾ç‰‡ä¼˜åŒ–" class="headerlink" title="2.å›¾ç‰‡ä¼˜åŒ–"></a>2.å›¾ç‰‡ä¼˜åŒ–</h2><p>æˆ‘çš„ç½‘ç«™è®¿é—®èµ·æ¥å¤ªæ…¢ï¼Œæœ€ä¸»è¦çš„åŸå› è¿˜æ˜¯ç”±äºä½¿ç”¨äº†å¤§é‡å›¾ç‰‡ï¼Œé™¤äº†å‹ç¼©å›¾ç‰‡ï¼Œä¸Šé¢è¯´äº†å¯ä»¥ä½¿ç”¨é›ªç¢§å›¾æ¥å‡å°‘å›¾ç‰‡è¯·æ±‚ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å­—ä½“å›¾æ ‡ä»£æ›¿ä¸€äº›å°å›¾ç‰‡ï¼Œå…¶æ¬¡ä½¿ç”¨webpæ ¼å¼ï¼Œå¯ä»¥å‡å°‘å›¾ç‰‡çš„å¤§å°ã€‚</p>
<blockquote>
<p>ä½¿ç”¨å›¾ç‰‡çš„æ—¶å€™ï¼Œå°½é‡æŒ‡å®šå›¾ç‰‡å¤§å°ï¼Œä¸è¦ç¼©æ”¾å›¾ç‰‡,å¦‚æœç½‘é¡µä¸­éœ€è¦ä»€ä¹ˆå°ºå¯¸çš„å›¾ç‰‡ï¼Œå°±è®¾è®¡ä»€ä¹ˆå°ºå¯¸çš„å›¾ç‰‡ã€‚å› ä¸ºæµè§ˆå™¨ä¸‹è½½åˆ°åŸå§‹å›¾ç‰‡ä¹‹åï¼Œå¦‚æœå°ºå¯¸ä¸ç›®æ ‡å°ºå¯¸ä¸åˆï¼Œæµè§ˆå™¨å°±ä¼šå»å¤„ç†å›¾ç‰‡(æ‹‰ä¼¸æˆ–è€…ç¼©å°)ï¼Œé€ æˆæµè§ˆå™¨è´Ÿæ‹…ã€‚</p>
</blockquote>
<h3 id="2-1-ä½¿ç”¨å­—ä½“å›¾æ ‡"><a href="#2-1-ä½¿ç”¨å­—ä½“å›¾æ ‡" class="headerlink" title="2.1 ä½¿ç”¨å­—ä½“å›¾æ ‡"></a>2.1 ä½¿ç”¨å­—ä½“å›¾æ ‡</h3><p>æˆ‘ä½¿ç”¨çš„æ˜¯<code>fontawesome</code>,ä½†æ˜¯æ–‡ä»¶ä½“ç§¯æœ‰ç‚¹å¤§ï¼Œæˆ‘è¯·æ±‚ <code>fontawesome-webfont.woff2?v=4.7.0</code>è¿™ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œè¦èŠ±1ç§’å¤šï¼Œé‡Œé¢æœ‰å¾ˆå¤šçš„å›¾æ ‡å…¶å®æˆ‘å¹¶æ²¡æœ‰ç”¨åˆ°ã€‚æ¨èä¸€ä¸ªç½‘ç«™ï¼Œ<a href="http://fontello.com/" target="_blank" rel="noopener">http://fontello.com/</a>,å¯ä»¥åˆ°é‡Œé¢é€‰æ‹©è‡ªå·±éœ€è¦çš„å›¾æ ‡ï¼Œç„¶åä¸‹è½½ä¸‹æ¥ï¼Œæ›¿æ¢æ‰fontawesome-webfont.woff è¿™ä¸ªæ–‡ä»¶ã€‚å½“ç„¶ä¹Ÿå¯ä»¥ç”¨ <code>IconFont</code>ï¼Œåªæ˜¯æˆ‘ä¹‹å‰æ˜¯fontawesomeï¼Œæˆ‘æ‡’å¾—æ¢äº†ã€‚</p>
<h3 id="2-2-ä½¿ç”¨webpæ ¼å¼"><a href="#2-2-ä½¿ç”¨webpæ ¼å¼" class="headerlink" title="2.2 ä½¿ç”¨webpæ ¼å¼"></a>2.2 ä½¿ç”¨webpæ ¼å¼</h3><p>æ¨èä¸€ä¸ªç½‘å€ï¼Œå¯ä»¥è½¬æ¢å›¾ç‰‡æ ¼å¼ä¸ºwebpï¼Œ<a href="https://www.upyun.com/webp" target="_blank" rel="noopener">https://www.upyun.com/webp</a></p>
<p>webpä½¿ç”¨æ–¹æ³•</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//htmlä¸­</span><br><span class="line"><span class="tag">&lt;<span class="name">picture</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">type</span>=<span class="string">"image/webp"</span> <span class="attr">srcset</span>=<span class="string">"123.webp"</span>&gt;</span> &gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"123.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">picture</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é¦–å…ˆåˆ¤æ–­æµè§ˆå™¨æ˜¯å¦æ”¯æŒwebpæ ¼å¼ï¼Œç»™æ–‡æ¡£åŠ ä¸Šdata-webpå±æ€§</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isSupportWebp</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> flag = <span class="string">'0'</span>;</span><br><span class="line">    <span class="keyword">var</span> canvasEL = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>);</span><br><span class="line">    <span class="keyword">var</span> docEl = <span class="built_in">document</span>.documentElement || <span class="built_in">document</span>.getElementsByTagName(<span class="string">'html'</span>)[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">if</span> (canvasEL.getContext &amp;&amp; canvasEL.getContext(<span class="string">'2d'</span>)) &#123;</span><br><span class="line">        flag = canvasEL.toDataURL(<span class="string">'image/webp'</span>).indexOf(<span class="string">'image/webp'</span>) &gt; <span class="number">-1</span> ? <span class="string">'1'</span>: <span class="string">'0'</span></span><br><span class="line">    &#125;;</span><br><span class="line">    docEl.setAttribute(<span class="string">'data-webp'</span>, flag);</span><br><span class="line">    <span class="keyword">return</span> flag</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç„¶ååœ¨èƒŒæ™¯å›¾ç‰‡ä¸­å¼•ç”¨,cssæ–‡ä»¶ä¸­</span></span><br><span class="line">[data-webp=<span class="string">"0"</span>] div&#123;</span><br><span class="line">    background: ur(<span class="string">"./123.jpg"</span>)</span><br><span class="line">&#125;</span><br><span class="line">[data-webp=<span class="string">"1"</span>] div&#123;</span><br><span class="line">    background: ur(<span class="string">"./123.webp"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ¨èè°·æ­Œçš„æ€§èƒ½æ£€æµ‹å·¥å…·â€”<code>PageSpeed</code>,åœ¨è°·æ­Œç½‘ä¸Šå•†åº—å¯ä»¥æ‰¾åˆ°ï¼Œé‡Œé¢ä¼šå¸®ä½ æä¾›æœ‰å“ªäº›éœ€è¦æ”¹è¿›çš„åœ°æ–¹ï¼Œåœ¨ä¼˜åŒ–å›¾ç‰‡ä¸­ä¼šå¸®ä½ æŠŠå›¾ç‰‡å‹ç¼©ä¸€ä¸‹ï¼Œå¯ä»¥ç›´æ¥ä¸‹è½½ä¸‹æ¥ä½¿ç”¨</p>
</blockquote>
<p><img src="https://www.eyes487.top/fs/uploads/1575897621817-request.png" alt="pagespeedæµ‹è¯•" title="å›¾1"></p>
<h2 id="3-Gzipä¼ è¾“å‹ç¼©"><a href="#3-Gzipä¼ è¾“å‹ç¼©" class="headerlink" title="3. Gzipä¼ è¾“å‹ç¼©"></a>3. Gzipä¼ è¾“å‹ç¼©</h2><p>åœ¨æœåŠ¡å™¨å¼€å¯<code>Gzip</code>å‹ç¼©ï¼Œå¯ä»¥å°†æ–‡ä»¶åœ¨ä¼ è¾“çš„æ—¶å€™ä½“ç§¯å‹ç¼©<code>70%</code> å·¦å³ï¼Œæ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒgzipè§£å‹ï¼Œéƒ½æ˜¯è‡ªåŠ¨çš„ã€‚</p>
<blockquote>
<p>ä¸è¦å¯¹å›¾ç‰‡è¿›è¡Œå‹ç¼©ï¼Œé¦–å…ˆhttpå‹ç¼©æ˜¯éœ€è¦æˆæœ¬çš„ï¼Œå…¶æ¬¡ï¼Œé‡‡ç”¨HTTPå‹ç¼©å·²ç»è¢«è¿‡å‹ç¼©çš„ä¸œè¥¿å¹¶ä¸èƒ½ä½¿å®ƒæ›´å°ã€‚å›¾ç‰‡å‹ç¼©ä¸ä»…æµªè´¹äº†CPUï¼Œè¿˜æœ‰å¯èƒ½å¢å¤§å›¾ç‰‡çš„ä½“ç§¯ã€‚</p>
</blockquote>
<p>æˆ‘ä½¿ç”¨çš„æ˜¯ <code>nginx</code>,é€šè¿‡åœ¨ <code>nginx.config</code> é…ç½®ä¸‹é¢ä»£ç </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">gzip on;   <span class="comment">//æ‰“å¼€gzip</span></span><br><span class="line">gzip_min_length <span class="number">1</span>k;   <span class="comment">//å½“è¿”å›å†…å®¹å¤§äºæ­¤å€¼æ—¶æ‰ä¼šä½¿ç”¨gzipè¿›è¡Œå‹ç¼©,ä»¥Kä¸ºå•ä½,å½“å€¼ä¸º0æ—¶ï¼Œæ‰€æœ‰é¡µé¢éƒ½è¿›è¡Œå‹ç¼©ã€‚</span></span><br><span class="line">#gzip_http_version 1.0;   //ç”¨äºè¯†åˆ«httpåè®®çš„ç‰ˆæœ¬ï¼Œæ—©æœŸçš„æµè§ˆå™¨ä¸æ”¯æŒgzipå‹ç¼©ï¼Œç”¨æˆ·ä¼šçœ‹åˆ°ä¹±ç ï¼Œæ‰€ä»¥ä¸ºäº†æ”¯æŒå‰æœŸç‰ˆæœ¬åŠ äº†æ­¤é€‰é¡¹ã€‚é»˜è®¤åœ¨http/1.0çš„åè®®ä¸‹ä¸å¼€å¯gzipå‹ç¼©ã€‚</span><br><span class="line">gzip_comp_level <span class="number">2</span>;   <span class="comment">//è®¾ç½®gzipå‹ç¼©çº§åˆ«ï¼Œçº§åˆ«è¶Šåº•å‹ç¼©é€Ÿåº¦è¶Šå¿«æ–‡ä»¶å‹ç¼©æ¯”è¶Šå°ï¼Œåä¹‹é€Ÿåº¦è¶Šæ…¢æ–‡ä»¶å‹ç¼©æ¯”è¶Šå¤§</span></span><br><span class="line">gzip_types text/plain application/javascript application/x-javascript text/css application/xml text/javascript application/x-httpd-php application/vnd.ms-fontobject font/ttf font/opentype font/x-woff image/svg+xml;   <span class="comment">//è®¾ç½®éœ€è¦å‹ç¼©çš„MIMEç±»å‹,å¦‚æœä¸åœ¨è®¾ç½®ç±»å‹èŒƒå›´å†…çš„è¯·æ±‚ä¸è¿›è¡Œå‹ç¼©</span></span><br><span class="line">gzip_vary off;  <span class="comment">//æ˜¯å¦å¯ç”¨åº”ç­”å¤´"Vary: Accept-Encoding"</span></span><br></pre></td></tr></table></figure>

<p>è®¾ç½®æˆåŠŸä¹‹åï¼Œè¯·æ±‚çš„å“åº”å¤´ä¸­ä¼šå¸¦æœ‰gzipå­—æ®µ<br><img src="https://www.eyes487.top/fs/uploads/1575968710080-gzip.png" alt="å¼€å¯å‹ç¼©" title="å›¾2"></p>
<h2 id="4-CDNåŠ é€Ÿ"><a href="#4-CDNåŠ é€Ÿ" class="headerlink" title="4. CDNåŠ é€Ÿ"></a>4. CDNåŠ é€Ÿ</h2><p>CDNåŠ é€Ÿæ„æ€å°±æ˜¯åœ¨ç”¨æˆ·å’Œæˆ‘ä»¬çš„æœåŠ¡å™¨ä¹‹é—´åŠ ä¸€ä¸ªç¼“å­˜æœºåˆ¶ï¼Œé€šè¿‡è¿™ä¸ªç¼“å­˜æœºåˆ¶åŠ¨æ€è·å–IPåœ°å€æ ¹æ®åœ°ç†ä½ç½®ï¼Œè®©ç”¨æˆ·åˆ°æœ€è¿‘çš„æœåŠ¡å™¨è®¿é—®ã€‚æˆ‘ä»¬æ˜¯ä¸å¯èƒ½è‡ªå·±æ­å»ºCDNçš„ï¼Œæ‰€ä»¥åªæœ‰ä»é˜¿é‡Œäº‘ï¼Œè…¾è®¯äº‘ä¹‹ç±»çš„è´­ä¹°ã€‚å› ä¸ºæˆ‘æš‚æ—¶ä¸éœ€è¦ï¼Œæ‰€ä»¥å°±æ²¡æœ‰ä½¿ç”¨ã€‚(ï¿£Ë‡ï¿£)</p>
<h2 id="5-ä»£ç ä¼˜åŒ–"><a href="#5-ä»£ç ä¼˜åŒ–" class="headerlink" title="5. ä»£ç ä¼˜åŒ–"></a>5. ä»£ç ä¼˜åŒ–</h2><ul>
<li>cssåº”è¯¥æ”¾åœ¨é¡µé¢é¦–éƒ¨ï¼Œåœ¨é¡µé¢ç”ŸæˆDom treeçš„æ—¶å€™ï¼Œå°±å¯ä»¥åŒæ—¶æ¸²æŸ“é¡µé¢ï¼Œä¸ä¼šå‘ç”Ÿé—ªå±ï¼Œç™½å±å’Œå¸ƒå±€æ··ä¹±ã€‚</li>
<li>jsæ˜¯ä¼šé˜»å¡é¡µé¢åŠ è½½çš„ï¼Œæ‰€ä»¥jså¯ä»¥æ”¾åœ¨é¡µé¢å°¾éƒ¨ï¼Œæˆ–è€…ä½¿ç”¨deferç­‰å»¶è¿ŸåŠ è½½ã€‚</li>
<li>ä½¿ç”¨æ¸è¿›å¼åŠ è½½å›¾ç‰‡ï¼Œå…ˆç”¨åˆ†è¾¨ç‡çš„å›¾ç‰‡ï¼Œç­‰ç©ºé—²æ—¶é—´åœ¨åˆ‡æ¢é«˜æ¸…å›¾ç‰‡ã€‚</li>
<li>å‡å°‘æ“ä½œdomçš„æ¬¡æ•°ï¼ŒæŠŠå¤šæ¬¡æ“ä½œå˜ä¸ºä¸€æ¬¡æ“ä½œï¼Œæ¯”å¦‚è„±ç¦»æ–‡æ¡£æµï¼Œéšè—å…ƒç´ ç­‰</li>
<li>é‡æ’ä¸€å®šä¼šé‡ç»˜ï¼Œæ›´åº”è¯¥å‡å°‘é‡æ’çš„å‘ç”Ÿ</li>
</ul>
<p>ä¸‹é¢æ˜¯æˆ‘ç”¨PageSpeedæµ‹è¯•çš„ç»“æœï¼ŒæŸ¥è¯¢æ•°æ®çš„æ¥å£ï¼Œæˆ‘è®¤ä¸ºæ²¡æœ‰åšç¼“å­˜çš„å¿…è¦ï¼Œæ‰€ä»¥å°±æ²¡æœ‰åšç¼“å­˜<br><img src="https://www.eyes487.top/fs/uploads/1575970832530-test-performance.png" alt="pageSpeedæµ‹è¯•" title="å›¾3"> </p>
<p>å‚è€ƒé“¾æ¥ï¼š <a href="https://juejin.im/post/5b6fa8c86fb9a0099910ac91#heading-10" target="_blank" rel="noopener">https://juejin.im/post/5b6fa8c8â€¦</a></p>

    </div>
    
    <div class="post-footer">
        <div>
            
            è½¬è½½å£°æ˜ï¼š
            å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒ,éå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ Â© <a href="http://blog.eyes487.top" target="_blank">eyes487çš„åšå®¢</a>
            
            
        </div>
        <div>
            
        </div>
    </div>
</article>
<div class="article-nav prev-next-wrap clearfix">
    
    <a href="/2020/01/26/vue-sourcec-analyse-01.html" class="pre-post btn btn-default" title='Vueæºç è§£æï¼ˆä¸€ï¼‰ï¼šå¦‚ä½•è§£è¯»æºç '>
        <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">ä¸Šä¸€ç¯‡</span>
        <span class="hidden-xs">
            Vueæºç è§£æï¼ˆä¸€ï¼‰ï¼šå¦‚ä½•è§£è¯»æºç </span>
    </a>
    
    
    <a href="/2019/11/16/a-picture-bed.html" class="next-post btn btn-default" title='è‡ªå»ºå›¾åºŠï¼šä¸Šä¼ å›¾ç‰‡ æ‡’åŠ è½½ ç€‘å¸ƒæµæ˜¾ç¤º'>
        <span class="hidden-lg">ä¸‹ä¸€ç¯‡</span>
        <span class="hidden-xs">
            è‡ªå»ºå›¾åºŠï¼šä¸Šä¼ å›¾ç‰‡ æ‡’åŠ è½½ ç€‘å¸ƒæµæ˜¾ç¤º</span><i class="fa fa-angle-right fa-fw"></i>
    </a>
    
</div>

<div id="comments">
    
<div id="lv-container" data-id="city" data-uid="MTAyMC8zMzA1MS85NjEz">
    <script type="text/javascript">
    (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
    })(document, 'script');
    </script>
</div>

</div>

                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">
            æ–‡ç« ç›®å½•
        </h3>
        
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#å‡çº§HTTPS"><span class="toc-text">å‡çº§HTTPS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å‡çº§HTTP2"><span class="toc-text">å‡çº§HTTP2</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-å‡å°‘httpè¯·æ±‚æ•°"><span class="toc-text">1. å‡å°‘httpè¯·æ±‚æ•°</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-åˆå¹¶å‹ç¼©"><span class="toc-text">1.1 åˆå¹¶å‹ç¼©</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-CSS-Sprites"><span class="toc-text">1.2 CSS Sprites</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-httpç¼“å­˜"><span class="toc-text">1.3 httpç¼“å­˜</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-å›¾ç‰‡ä¼˜åŒ–"><span class="toc-text">2.å›¾ç‰‡ä¼˜åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-ä½¿ç”¨å­—ä½“å›¾æ ‡"><span class="toc-text">2.1 ä½¿ç”¨å­—ä½“å›¾æ ‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-ä½¿ç”¨webpæ ¼å¼"><span class="toc-text">2.2 ä½¿ç”¨webpæ ¼å¼</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Gzipä¼ è¾“å‹ç¼©"><span class="toc-text">3. Gzipä¼ è¾“å‹ç¼©</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-CDNåŠ é€Ÿ"><span class="toc-text">4. CDNåŠ é€Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-ä»£ç ä¼˜åŒ–"><span class="toc-text">5. ä»£ç ä¼˜åŒ–</span></a></li></ol>
        
    </div>
</aside>
                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>
<a id="back-to-top" class="icon-btn hide">
    <i class="fa fa-chevron-up"></i>
</a>
    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="busuanzi">
    
    è®¿é—®é‡:
    <strong id="busuanzi_value_site_pv">
        <i class="fa fa-spinner fa-spin"></i>
    </strong>
    &nbsp; | &nbsp;
    è®¿å®¢æ•°:
    <strong id="busuanzi_value_site_uv">
        <i class="fa fa-spinner fa-spin"></i>
    </strong>
    
</div>
            </div>
            <div class="col-sm-12">
                <span>Copyright &copy;
                    2019
                </span> |
                <span>
                   å“ˆå“ˆå“ˆ
                </span>
            </div>
        </div>
    </div>
</div>



<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script src="/js/line.js?rev=@@hash"></script>
<script src="/js/bubble.js?rev=@@hash"></script>
<script src="/js/shape.js?rev=@@hash"></script>
<script src="/js/app.js?rev=@@hash"></script>
</body>
</html>